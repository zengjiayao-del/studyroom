{% extends 'index/base.html' %}
{% block title %}
    è­¦å‘Šè®°å½•
{% endblock %}
{% block warn_active %}
    active
{% endblock %}
{% block index %}
    <main class="container">
        <!-- è­¦å‘Šæ•°é‡ç»Ÿè®¡å’Œé»‘åå•æé†’ -->
        <div class="alert alert-info alert-dismissible fade show" role="alert">
            <div class="d-flex align-items-center">
                <div class="flex-grow-1">
                    <h5 class="mb-2">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        è­¦å‘Šç»Ÿè®¡
                    </h5>
                    <p class="mb-0">
                        æ‚¨å½“å‰æœ‰ <strong class="text-danger">{{ warning_count }}</strong> æ¡è­¦å‘Šè®°å½•ã€‚
                        {% if warning_count == 0 %}
                            <span class="text-success">ä¿æŒè‰¯å¥½è®°å½•ï¼</span>
                        {% elif warning_count == 1 %}
                            <span class="text-warning">è¿˜å‰© <strong>{{ remaining_warnings }}</strong> æ¬¡è­¦å‘Šæœºä¼š</span>
                        {% elif show_blacklist_warning %}
                            <span class="text-danger">âš ï¸ å†æ”¶åˆ° <strong>{{ remaining_warnings }}</strong> æ¬¡è­¦å‘Šå°†è¢«åŠ å…¥é»‘åå•ï¼</span>
                        {% else %}
                            <span class="text-danger">ğŸš« æ‚¨å·²è¾¾åˆ°è­¦å‘Šä¸Šé™ï¼Œè¯·æ³¨æ„éµå®ˆè§„å®šï¼</span>
                        {% endif %}
                    </p>
                </div>
                <div class="ms-3">
                    {% if show_blacklist_warning %}
                        <div class="text-center">
                            <div class="bg-danger text-white rounded-circle p-3" style="width: 80px; height: 80px; display: flex; align-items: center; justify-content: center;">
                                <div>
                                    <div style="font-size: 24px; font-weight: bold;">{{ warning_count }}</div>
                                    <div style="font-size: 12px;">/ 3</div>
                                </div>
                            </div>
                            <small class="text-danger d-block mt-1">è­¦å‘Šé£é™©</small>
                        </div>
                    {% elif warning_count == 1 %}
                        <div class="text-center">
                            <div class="bg-warning text-white rounded-circle p-3" style="width: 80px; height: 80px; display: flex; align-items: center; justify-content: center;">
                                <div>
                                    <div style="font-size: 24px; font-weight: bold;">{{ warning_count }}</div>
                                    <div style="font-size: 12px;">/ 3</div>
                                </div>
                            </div>
                            <small class="text-warning d-block mt-1">æ³¨æ„è­¦å‘Š</small>
                        </div>
                    {% else %}
                        <div class="text-center">
                            <div class="bg-success text-white rounded-circle p-3" style="width: 80px; height: 80px; display: flex; align-items: center; justify-content: center;">
                                <div>
                                    <div style="font-size: 24px; font-weight: bold;">{{ warning_count }}</div>
                                    <div style="font-size: 12px;">/ 3</div>
                                </div>
                            </div>
                            <small class="text-success d-block mt-1">è‰¯å¥½è®°å½•</small>
                        </div>
                    {% endif %}
                </div>
            </div>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>

        <!-- é»‘åå•ä¸¥é‡è­¦å‘Š -->
        {% if show_blacklist_warning %}
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <div class="d-flex align-items-center">
                <div class="flex-grow-1">
                    <h5 class="mb-2">
                        <i class="fas fa-ban me-2"></i>
                        é»‘åå•è­¦å‘Š
                    </h5>
                    <p class="mb-0">
                        <strong>é‡è¦æé†’ï¼š</strong>æ‚¨å·²æ”¶åˆ° {{ warning_count }} æ¬¡è­¦å‘Šï¼Œ
                        æ ¹æ®è‡ªä¹ å®¤ç®¡ç†è§„å®šï¼Œç´¯è®¡è¾¾åˆ°<strong class="text-danger">3æ¬¡è­¦å‘Š</strong>å°†è¢«è‡ªåŠ¨åŠ å…¥é»‘åå•ï¼Œ
                        é»‘åå•æœŸé—´å°†æ— æ³•é¢„çº¦åº§ä½ã€‚è¯·åŠ¡å¿…éµå®ˆè‡ªä¹ å®¤å„é¡¹è§„å®šï¼Œé¿å…è¿›ä¸€æ­¥çš„è¿è§„è¡Œä¸ºã€‚
                    </p>
                    <div class="mt-2">
                        <small class="text-muted">
                            <i class="fas fa-info-circle me-1"></i>
                            é»‘åå•å½±å“ï¼šæ— æ³•é¢„çº¦åº§ä½ã€æ— æ³•ç­¾åˆ°ã€é™åˆ¶ä½¿ç”¨è‡ªä¹ å®¤æœåŠ¡
                        </small>
                    </div>
                </div>
            </div>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endif %}

        <!-- è­¦å‘Šè®°å½•æ ‡é¢˜ -->
        <div class="row mt-4">
            <div class="col-12">
                <h4 class="mb-3">
                    <i class="fas fa-list-alt me-2"></i>
                    è­¦å‘Šè®°å½•è¯¦æƒ…
                    {% if warning_count > 0 %}
                        <span class="badge bg-danger ms-2">{{ warning_count }} æ¡</span>
                    {% endif %}
                </h4>
            </div>
        </div>

        <!-- è­¦å‘Šè®°å½•åˆ—è¡¨ -->
        {% if integrals %}
            {% for i in integrals %}
                <div class="card border-danger mb-3">
                    <div class="card-header bg-danger text-white">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">
                                <i class="fas fa-exclamation-circle me-2"></i>
                                {{ i.title }}
                            </h5>
                            <span class="badge bg-light text-danger">è­¦å‘Š #{{ forloop.counter }}</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <p class="card-text">{{ i.text }}</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <small class="text-muted">
                                <i class="fas fa-clock me-1"></i>
                                æ—¶é—´ï¼š{{ i.time|date:"Yå¹´mæœˆdæ—¥ H:i" }}
                            </small>
                            <span class="badge bg-warning text-dark">
                                <i class="fas fa-gavel me-1"></i>
                                è¿è§„è®°å½•
                            </span>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <!-- æ— è­¦å‘Šè®°å½•æ—¶çš„æç¤º -->
            <div class="text-center py-5">
                <div class="mb-4">
                    <i class="fas fa-check-circle text-success" style="font-size: 64px;"></i>
                </div>
                <h4 class="text-success mb-3">æš‚æ— è­¦å‘Šè®°å½•</h4>
                <p class="text-muted mb-4">
                    æ­å–œæ‚¨ï¼æ‚¨ç›®å‰æ²¡æœ‰ä»»ä½•è­¦å‘Šè®°å½•ï¼Œè¯·ç»§ç»­ä¿æŒè‰¯å¥½çš„ä½¿ç”¨ä¹ æƒ¯ã€‚
                </p>
                <div class="alert alert-success" style="max-width: 500px; margin: 0 auto;">
                    <h6 class="alert-heading">
                        <i class="fas fa-lightbulb me-2"></i>
                        æ¸©é¦¨æç¤º
                    </h6>
                    <p class="mb-2">
                        ä¸ºäº†ä¿æŒè‰¯å¥½çš„è®°å½•ï¼Œè¯·æ³¨æ„ï¼š
                    </p>
                    <ul class="mb-0 text-start">
                        <li>æŒ‰æ—¶ç­¾åˆ°ï¼Œä¸è¦è¿Ÿåˆ°</li>
                        <li>éµå®ˆè‡ªä¹ å®¤å®‰é™è§„å®š</li>
                        <li>ä¿æŒåº§ä½æ•´æ´</li>
                        <li>æŒ‰æ—¶ç¦»å¼€ï¼Œä¸è¦å ç”¨åº§ä½</li>
                    </ul>
                </div>
            </div>
        {% endif %}
    </main>

    <style>
        .alert {
            border: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .card {
            transition: transform 0.2s ease-in-out;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .badge {
            font-size: 0.8em;
        }
        
        .rounded-circle {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(220, 53, 69, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(220, 53, 69, 0);
            }
        }
        
        .bg-warning .rounded-circle {
            animation: pulse-warning 2s infinite;
        }
        
        @keyframes pulse-warning {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 193, 7, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(255, 193, 7, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(255, 193, 7, 0);
            }
        }
        
        .bg-success .rounded-circle {
            animation: none;
        }
    </style>
{% endblock %}